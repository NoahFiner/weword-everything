(window.webpackJsonpfe=window.webpackJsonpfe||[]).push([[0],{108:function(e,t){},111:function(e,t,n){},112:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},136:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),s=n.n(o),i=(n(78),n(4)),c=n(5),l=n(8),u=n(6),p=n(7),m=n(21),h=n(13),d=n(14),b=n.n(d),f=n(18),g=n(66),v=n.n(g),y=(n(111),n(10)),E=(n(112),n(19)),O=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={word:"",error:""},n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({word:e.target.value,error:""})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.props.storyId;this.props.socket.emit("addWord",{word:this.state.word.trim(),room:n,username:this.props.name},(function(e){e?"duplicate word"!==e&&t.setState({error:e}):t.setState({word:""})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"footer "+(this.props.inactive?"inactive":"")},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Add a word:"),r.a.createElement("input",{type:"text",onChange:this.handleChange,value:this.state.word,className:"add-word-input "+(this.state.error?"error":"")}),r.a.createElement("input",{type:"submit",value:"submit",className:"button"})),r.a.createElement("p",{id:"error-msg"},this.state.error))}}]),t}(a.Component),j=Object(E.b)((function(e){return{name:e.name,loggedIn:e.loggedIn}}))(O),w=(n(117),n(118),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(m.b,{to:"/"},r.a.createElement("div",{className:"logo-box",style:{borderWidth:this.props.size/15,width:this.props.size+"px",height:this.props.size+"px"}},r.a.createElement("p",{className:"logo-line-1",style:{fontSize:this.props.size/3.5+"px"}},"We"),r.a.createElement("p",{className:"logo-line-2",style:{fontSize:this.props.size/3.5+"px"}},"Word")))}}]),t}(r.a.Component)),k=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"left-navbar"},r.a.createElement(w,{size:"80"}),r.a.createElement("h1",null,this.props.story.name),r.a.createElement("p",null,this.props.story.description),r.a.createElement("div",{className:"divider"}),r.a.createElement("h3",null,"Currently online"),this.props.users.map((function(e,t){return r.a.createElement("div",{className:"user",key:"user"+t},r.a.createElement("div",{class:"online"}),r.a.createElement("p",null,e))})))}}]),t}(a.Component),N=n(25),C=n.n(N),I=n(145),S=n(144),_=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={story:{},words:[],endpoint:"https://weword.co",socket:null,users:[],disabled:!1},console.log("production"),console.log("API URL",Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.state.socket.close()}},{key:"componentDidMount",value:function(){var e=Object(f.a)(b.a.mark((function e(){var t,n,a,r,o,s=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.storyId,n=this.state.endpoint,e.prev=2,e.next=5,C.a.get(n+"/stories/"+t);case 5:a=e.sent,r=a.data.story,console.log(r),this.setState({story:r}),o=v()(n),this.setState({socket:o}),console.log(this.props.name+" is joining"),o.emit("join",{room:t,username:this.props.name},(function(e){e&&(alert(e),s.props.history.push("/"))})),o.on("sendWords",(function(e){console.log("gettings sent words",e),s.setState({words:e})})),o.on("disable",(function(e){s.setState({disabled:!0})})),o.on("enable",(function(e){s.setState({disabled:!1})})),o.on("sendUsers",(function(e){s.setState({users:e})})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.error(e.t0);case 22:case"end":return e.stop()}}),e,this,[[2,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.words;return console.log(e),r.a.createElement("div",null,r.a.createElement(k,{story:this.state.story,users:this.state.users}),r.a.createElement("div",{className:"content-outer"},r.a.createElement("div",{className:"content"},r.a.createElement(I.a,null,e.map((function(e,t){return r.a.createElement(S.a,{timeout:500,classNames:"word"},r.a.createElement("p",{key:t,className:"word"},e.word))})),r.a.createElement("div",{className:"next-word"})))),r.a.createElement(j,{inactive:this.state.disabled,socket:this.state.socket,storyId:this.state.story._id}))}}]),t}(a.Component),x=Object(E.b)((function(e){return{name:e.name,loggedIn:e.loggedIn}}))(_),L=(n(136),"LOGIN"),P="LOGOUT";var U=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={typedName:"",error:null,endpoint:"https://weword.co"},console.log("API URL",Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL),e.handleInputChange=e.handleInputChange.bind(Object(y.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(y.a)(e)),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target.value;this.setState({typedName:t,error:null})}},{key:"handleSubmit",value:function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.props.loggedIn?this.props.logout():this.props.login(this.state.typedName),this.setState({typedName:""}),console.log(this.props.loggedIn);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("form",{id:"login",onSubmit:this.handleSubmit},this.props.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Writing as ",this.props.name),r.a.createElement("input",{type:"submit",value:"Log out"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",name:"name",placeholder:"what's your name?",value:this.state.typedName,onChange:this.handleInputChange}),r.a.createElement("input",{type:"submit",value:"Log in"}),r.a.createElement("p",{className:"error",style:{display:this.state.error?"block":"none"}},"Couldn't log in as that user")))}}]),t}(a.Component),A=Object(E.b)((function(e){return{name:e.name,loggedIn:e.loggedIn}}),(function(e){return{login:function(t){return e({type:L,payload:t})},logout:function(){return e({type:P})}}}))(U),R=n(69),W=n(70),D=(n(139),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log(this.props.story),r.a.createElement("div",{className:"book-outer "+(this.props.create?"create":"")},this.props.create?r.a.createElement("div",{className:"book-single"},r.a.createElement("h1",null,"create a new story"),r.a.createElement(R.a,{icon:W.a,className:"create-book"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"book-header"},r.a.createElement("h1",null,this.props.story.name),r.a.createElement("p",null,this.props.story.description)),r.a.createElement("div",{className:"book-footer"},r.a.createElement("p",null,this.props.story.length," words"),this.props.story.onlineCount?r.a.createElement("div",{className:"online-outer"},r.a.createElement("div",{className:"online"}),r.a.createElement("p",{className:"online-text"},this.props.story.onlineCount," writers online")):r.a.createElement(r.a.Fragment,null))))}}]),t}(a.Component)),z=(n(140),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={stories:[],endpoint:"https://weword.co"},console.log("production"),console.log("API URL",Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.endpoint,e.prev=1,e.next=4,C.a.get(t+"/stories");case 4:n=e.sent,a=n.data.stories,this.setState({stories:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.stories;return r.a.createElement("div",{className:"everything-outer"},r.a.createElement(w,{size:"150"}),r.a.createElement("h1",null,"Write a story with a bunch of random people online"),r.a.createElement(A,null),r.a.createElement(I.a,{className:"books-outer"},e.sort((function(e,t){return e.onlineCount===t.onlineCount?e.length<t.length?1:-1:e.onlineCount<t.onlineCount?1:-1})).map((function(e,t){return r.a.createElement(S.a,{key:e._id,timeout:500,style:{transitionDelay:25*t+"ms"},classNames:"story"},r.a.createElement(m.b,{to:"/stories/"+e._id},r.a.createElement(D,{story:e})))})),r.a.createElement(S.a,{key:"create",timeout:25*e.length+"ms",style:{transitionDelay:25*e.length+"ms"},appear:!0,classNames:"story"},r.a.createElement(m.b,{to:"/create"},r.a.createElement(D,{create:!0})))))}}]),t}(a.Component)),T=Object(h.f)(z),B=n(42),F=(n(141),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={title:"",description:"",error:null,endpoint:"https://weword.co"},console.log("production"),console.log("API URL",Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL),e.handleInputChange=e.handleInputChange.bind(Object(y.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(y.a)(e)),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){var t,n=e.target,a=n.value,r=n.name;this.setState((t={},Object(B.a)(t,r,a),Object(B.a)(t,"error",null),t))}},{key:"handleSubmit",value:function(){var e=Object(f.a)(b.a.mark((function e(t){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:this.state.title,description:this.state.description},console.log("submitting",n),e.prev=3,e.next=6,C.a.post(this.state.endpoint+"/create",null,{params:n});case 6:a=e.sent,r=a.data,this.props.history.push("/stories/"+r.story._id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),this.setState({error:JSON.stringify(e.t0)});case 15:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"everything-outer"},r.a.createElement(w,{size:"150"}),r.a.createElement("h1",null,"Let's start something great"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Title",r.a.createElement("span",null,"Think of something short and sweet")),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleInputChange}),r.a.createElement("label",null,"Description",r.a.createElement("span",null,"What's this thing even about?")),r.a.createElement("input",{type:"text",name:"description",value:this.state.description,onChange:this.handleInputChange}),r.a.createElement("input",{type:"submit",value:"Submit"}),r.a.createElement("p",{className:"error",style:{display:this.state.error?"block":"none"}},"Error in creating your story")))}}]),t}(a.Component)),V=Object(h.f)(F),J=(n(142),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){document.title="WeWord"}},{key:"render",value:function(){return r.a.createElement("div",{className:"outer"},r.a.createElement(m.a,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/create",component:V}),r.a.createElement(h.a,{path:"/stories/:storyId",component:x}),r.a.createElement(h.a,{path:"/",component:T}))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=n(31),G={loggedIn:!1,name:""};var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;return t.type===L?e={loggedIn:!0,name:t.payload}:t.type===P&&(e=G),e},q=Object(M.b)($),H=n(43);H.a.initialize("UA-59921773-10"),H.a.pageview(window.location.pathname+window.location.search),s.a.render(r.a.createElement(E.a,{store:q},r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},73:function(e,t,n){e.exports=n(143)},78:function(e,t,n){}},[[73,1,2]]]);
//# sourceMappingURL=main.dff78560.chunk.js.map