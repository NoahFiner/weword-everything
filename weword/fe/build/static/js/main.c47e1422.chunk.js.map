{"version":3,"sources":["components/Footer/index.js","components/Logo/index.js","components/LeftNavbar/index.js","components/Story/index.js","redux/constants/index.js","components/Login/index.js","redux/actions/index.js","components/Book/index.js","components/Home/index.js","components/CreateBook/index.js","components/Router/index.js","serviceWorker.js","redux/reducers/index.js","redux/store/index.js","index.js"],"names":["ReactGA","initialize","Footer","props","state","word","error","handleChange","bind","handleSubmit","storyId","this","pageview","event","setState","target","value","preventDefault","socket","emit","trim","room","username","name","category","action","JSON","stringify","message","className","inactive","onSubmit","type","onChange","id","Component","connect","loggedIn","Logo","to","style","borderWidth","size","width","height","fontSize","React","LeftNavbar","story","description","users","map","user","idx","key","ConnectedStory","words","endpoint","disabled","close","match","params","axios","get","response","data","socketIOClient","alert","history","push","on","console","TransitionGroup","time","moment","createdAt","format","CSSTransition","timeout","classNames","author","_id","Story","LOGIN","LOGOUT","ConnectedLogin","typedName","handleInputChange","logout","login","e","placeholder","display","Login","dispatch","payload","Book","create","icon","faPlusCircle","length","onlineCount","Home","stories","href","sort","a","b","transitionDelay","appear","withRouter","CreateBook","title","post","log","RouterOuter","document","path","component","Boolean","window","location","hostname","initialState","rootReducer","Error","store","createStore","pathname","search","ReactDOM","render","Router","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c47e1422.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport './Footer.scss';\nimport {connect} from 'react-redux';\n\nimport ReactGA from 'react-ga';\nReactGA.initialize('UA-59921773-10');\n\nconst mapStateToProps = state => {\n  return { name: state.name, loggedIn: state.loggedIn };\n};\n\nclass Footer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {word: '', error: ''}\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    let {storyId} = this.props;\n    ReactGA.pageview('/stories/' + storyId);\n  }\n\n  handleChange(event) {\n    this.setState({word: event.target.value, error: ''});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let {storyId} = this.props;\n\n    this.props.socket.emit(\"addWord\", {word: this.state.word.trim(), room: storyId, username: this.props.name}, (error) => {\n      if(error) {\n        if(error !== \"duplicate word\") {\n          ReactGA.event({\n            category: \"Users\",\n            action: \"Failed write\",\n            value: this.state.word.trim()\n          });\n          this.setState({error: JSON.stringify(error.message)});\n        }\n      } else {\n        ReactGA.event({\n          category: \"Users\",\n          action: \"Successful write\",\n          value: this.state.word.trim()\n        });\n        this.setState({word: ''});\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className={\"footer \" + (this.props.inactive ? 'inactive':  '')}>\n        <form onSubmit={this.handleSubmit}>\n          <h1>Add a word:</h1>\n          <input type=\"text\" onChange={this.handleChange} value={this.state.word} className={\"add-word-input \" + (this.state.error ? 'error' : '')}></input>\n          <input type=\"submit\" value=\"submit\" className=\"button\"></input>\n        </form>\n        <p id=\"error-msg\">\n          {this.state.error}\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps)(Footer);\n","import React from 'react';\nimport './Logo.scss';\nimport {Link} from \"react-router-dom\";\n\nclass Logo extends React.Component {\n    render() {\n        return (\n            <Link to=\"/\">\n                <div className=\"logo-box\" style={{borderWidth: this.props.size/15, width: this.props.size + 'px', height: this.props.size + 'px'}}>\n                    <p className=\"logo-line-1\" style={{fontSize: this.props.size/3.5 + 'px'}}>We</p>\n                    <p className=\"logo-line-2\" style={{fontSize: this.props.size/3.5 + 'px'}}>Word</p>\n                </div>\n            </Link>\n        )\n    }\n}\n\nexport default Logo;","import React, {Component} from 'react';\nimport './LeftNavbar.scss';\nimport Logo from '../Logo';\n\nclass LeftNavbar extends Component {\n  render() {\n    return (\n      <div className=\"left-navbar\">\n        <Logo size='80' />\n        <h1>{this.props.story.name}</h1>\n        <p>{this.props.story.description}</p>\n        <div className=\"divider\"></div>\n        <h3>Currently online</h3>\n        {this.props.users.map((user, idx) => {\n          return (\n            <div className=\"user\" key={'user' + idx}>\n              <div className=\"online\"></div>\n              <p>{user}</p>\n            </div>\n          )\n        })}\n      </div>\n    );\n  }\n}\n\nexport default LeftNavbar;\n","import React, {Component} from 'react';\nimport socketIOClient from \"socket.io-client\";\nimport './Story.scss';\nimport Footer from '../Footer';\nimport LeftNavbar from '../LeftNavbar';\nimport axios from 'axios';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport {connect} from 'react-redux';\nimport moment from 'moment';\n\nconst mapStateToProps = state => {\n  return { name: state.name, loggedIn: state.loggedIn };\n};\n\nclass ConnectedStory extends Component {\n  constructor() {\n    super();\n    this.state = {\n      story: {},\n      words: [],\n      // endpoint: process.env.REACT_APP_API_URL || \"http://127.0.0.1:4001\",\n      endpoint: process.env.NODE_ENV === \"production\" ? \"https://weword.co\" : \"http://127.0.0.1:4001\",\n      socket: null,\n      users: [],\n      disabled: false,\n    };\n  }\n\n  componentWillUnmount() {\n    this.state.socket.close();\n  }\n\n  async componentDidMount() {\n    let {storyId} = this.props.match.params;\n\n    const {endpoint} = this.state;\n    try {\n      const response = await axios.get(endpoint + \"/stories/\" + storyId);\n      const {story} = response.data;\n      this.setState({story});\n\n      const socket = socketIOClient(endpoint);\n      this.setState({socket});\n\n\n      socket.emit(\"join\", {room: storyId, username: this.props.name}, error => {\n        if(error) {\n          alert(error);\n          this.props.history.push('/');\n        }\n      });\n\n      socket.on(\"sendWords\", words => {\n        this.setState({words});\n      });\n\n      socket.on(\"disable\", data => {\n        this.setState({disabled: true});\n      });\n\n      socket.on(\"enable\", data => {\n        this.setState({disabled: false});\n      });\n\n      socket.on(\"sendUsers\", data => {\n        this.setState({users: data});\n      });\n    } catch(e) {\n      console.error(e);\n    }\n  }\n\n  render() {\n    const {words} = this.state;\n    return (\n      <div>\n        <LeftNavbar story={this.state.story} users={this.state.users} />\n        <div className=\"content-outer\">\n          <div className=\"content\">\n            <TransitionGroup>\n              {words.map((value, idx) => {\n                const time = moment(value.createdAt).format(\"MM-DD-YYYY h:mm A\");\n                return (<CSSTransition key={\"transition\"+idx} timeout={500} classNames=\"word\">\n                  <>\n                  <p key={idx} className=\"word\">\n                    {value.word}\n                  </p>\n                  <span className=\"user-view\">\n                    by <span className=\"bold\">{value.author}</span> on {time}\n                  </span>\n                  </>\n                </CSSTransition>)\n              })}\n              <div className=\"next-word\"></div>\n            </TransitionGroup>\n          </div>\n        </div>\n        <Footer inactive={this.state.disabled} socket={this.state.socket} storyId={this.state.story._id} />\n      </div>\n    );\n  }\n}\n\nconst Story = connect(mapStateToProps)(ConnectedStory);\n\nexport default Story;\n","export const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";","import React, {Component} from 'react';\nimport './Login.scss';\nimport {connect} from 'react-redux'\nimport {login, logout} from '../../redux/actions';\n\nconst mapStateToProps = state => {\n  return { name: state.name, loggedIn: state.loggedIn };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    login: name => dispatch(login(name)),\n    logout: () => dispatch(logout())\n  };\n}\n\n\nclass ConnectedLogin extends Component {\n  constructor() {\n    super();\n    this.state = {\n      typedName: '',\n      error: null,\n      // endpoint: process.env.REACT_APP_API_URL || \"http://127.0.0.1:4001\",\n      endpoint: process.env.NODE_ENV === \"production\" ? \"https://weword.co\" : \"http://127.0.0.1:4001\",\n    };\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n\n    this.setState({\n      typedName: value,\n      error: null,\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    try {\n      if(this.props.loggedIn) {\n        this.props.logout();\n      } else {\n        this.props.login(this.state.typedName);\n      }\n      this.setState({ typedName: \"\" });\n    } catch(e) {\n      this.setState({ error: e.message });\n    }\n\n    // try {\n    //   const {data} = await axios.post(this.state.endpoint + '/create', null, {params});\n    //   this.props.history.push('/stories/' + data.story._id);\n    // } catch(error) {\n    //   console.log(error);\n    //   this.setState({error: JSON.stringify(error)});\n    // }\n  }\n\n  render() {\n    return (\n      <form id=\"login\" onSubmit={this.handleSubmit}>\n        {this.props.loggedIn ? (\n          <>\n          <h2>Writing as {this.props.name}</h2>\n          <input type=\"submit\" value=\"Log out\" />\n          </>\n        ) : (\n          <>\n            <input type=\"text\" name=\"name\" placeholder=\"what's your name?\" value={this.state.typedName} onChange={this.handleInputChange} />\n            <input type=\"submit\" value=\"Log in\" />\n            <p className=\"error\" style={{display: (this.state.error ? \"block\" : \"none\")}}>{(this.state.error || \"Couldn't log in\")}</p>\n          </>\n        )}\n      </form>\n    );\n  }\n}\n\nconst Login = connect(mapStateToProps, mapDispatchToProps)(ConnectedLogin);\n\nexport default Login;","import { LOGIN, LOGOUT } from \"../constants\";\n\nexport function login(payload) {\n    return {\n        type: LOGIN,\n        payload\n    }\n}\n\nexport function logout() {\n    return {\n        type: LOGOUT\n    }\n}","import React, {Component} from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport './Book.scss';\n\nclass Book extends Component {\n  render() {\n    return (\n      <div className={\"book-outer \" + (this.props.create ? \"create\" : \"\")}>\n        {\n          this.props.create ? (\n            <div className=\"book-single\">\n              <h1>create a new story</h1>\n              <FontAwesomeIcon icon={faPlusCircle} className=\"create-book\" ></FontAwesomeIcon>\n            </div>\n          ) : (\n            <>\n              <div className=\"book-header\">\n                <h1>{this.props.story.name}</h1>\n                <p>{this.props.story.description}</p>\n              </div>\n              <div className=\"book-footer\">\n                <p>{this.props.story.length} words</p>\n                {\n                  !this.props.story.onlineCount ? <></> : (\n                    <div className=\"online-outer\">\n                      <div className=\"online\"></div>\n                      <p className=\"online-text\">{this.props.story.onlineCount} writers online</p>\n                    </div>\n                  )\n                }\n              </div>\n            </>\n          )\n        }\n      </div>\n    );\n  }\n}\n\nexport default Book;\n","import React, {Component} from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n} from \"react-router-dom\";\nimport Story from  '../Story';\nimport Login from '../Login';\nimport Book from '../Book';\nimport Logo from '../Logo';\nimport axios from 'axios';\nimport './Home.scss';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport {withRouter} from 'react-router';\n\nclass Home extends Component {\n  constructor() {\n    super();\n    this.state = {\n      stories: [],\n      // TODO THIS IS HELLA INSECURE\n      // endpoint: process.env.REACT_APP_API_URL || \"http://127.0.0.1:4001\",\n      endpoint: process.env.NODE_ENV === \"production\" ? \"https://weword.co\" : \"http://127.0.0.1:4001\",\n    };\n  }\n\n  async componentDidMount() {\n    const { endpoint } = this.state;\n    try {\n      const response = await axios.get(endpoint + \"/stories\");\n      const stories = response.data.stories;\n      this.setState({stories});\n    } catch(e) {\n      console.error(e);\n    }\n  }\n\n  render() {\n    const stories = this.state.stories;\n    return (\n      <div className=\"everything-outer\">\n        <Logo size='150' />\n        <h1>Write a story with a bunch of random people online, one word at a time</h1>\n        <p>(and follow us at <a href=\"https://twitter.com/weword_co\" className=\"link\" target=\"_blank\">@weword_co</a> or give <a className=\"link\" target=\"_blank\" href=\"https://docs.google.com/forms/d/e/1FAIpQLSdTaoCoy686evMyAnDO5djYzo3JxUpRk2UFRQIM7rZ8iR49sw/viewform?usp=sf_link\">anonymous feedback</a> while you're at it)</p>\n        <Login></Login>\n          <TransitionGroup className=\"books-outer\">\n              {stories.sort((a, b) => {\n                if (a.onlineCount === b.onlineCount) {\n                  return a.length < b.length ? 1 : -1\n               }\n               return a.onlineCount < b.onlineCount ? 1 : -1;\n              }).map((story, idx) => {\n                return (<CSSTransition key={story._id} timeout={500} style={{transitionDelay: idx*50+'ms'}} classNames=\"story\">\n                  <Link to={\"/stories/\" + story._id}>\n                    <Book story={story} />\n                  </Link>\n                </CSSTransition>)\n              })}\n              <CSSTransition key=\"create\" timeout={stories.length*50+'ms'} style={{transitionDelay: stories.length*50+'ms'}} appear={true} classNames=\"story\">\n                <Link to=\"/create\">\n                  <Book create />\n                </Link>\n              </CSSTransition>\n          </TransitionGroup>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Home);\n","import React, {Component} from 'react';\nimport Logo from '../Logo';\nimport axios from 'axios';\nimport './CreateBook.scss';\nimport {withRouter} from 'react-router';\n\nimport ReactGA from 'react-ga';\nReactGA.initialize('UA-59921773-10');\n\nclass CreateBook extends Component {\n  constructor() {\n    super();\n    this.state = {\n      title: '',\n      description: '',\n      error: null,\n      // TODO THIS IS HELLA INSECURE\n      // endpoint: process.env.REACT_APP_API_URL || \"http://127.0.0.1:4001\",\n      endpoint: process.env.NODE_ENV === \"production\" ? \"https://weword.co\" : \"http://127.0.0.1:4001\",\n    };\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value,\n      error: null,\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const params = {\n      name: this.state.title,\n      description: this.state.description,\n    }\n    try {\n      const {data} = await axios.post(this.state.endpoint + '/create', null, {params});\n      ReactGA.event({\n        category: \"Users\",\n        action: \"Book creation\",\n        value: params.name,\n      });\n      this.props.history.push('/stories/' + data.story._id);\n    } catch(error) {\n      console.log(error);\n      this.setState({error: JSON.stringify(error)});\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"everything-outer\">\n        <Logo size='150' />\n        <h1>Let's start something great</h1>\n        <form onSubmit={this.handleSubmit}>\n          <label>\n            Title\n            <span>Think of something short and sweet</span>\n          </label>\n          <input type=\"text\" name=\"title\" value={this.state.title} onChange={this.handleInputChange} />\n\n          <label>\n            Description\n            <span>What's this thing even about?</span>\n          </label>\n          <input type=\"text\" name=\"description\" value={this.state.description} onChange={this.handleInputChange} />\n          <input type=\"submit\" value=\"Submit\" />\n          <p className=\"error\" style={{display: (this.state.error ? \"block\" : \"none\")}}>Error in creating your story</p>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(CreateBook);\n","import React, {Component} from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport Story from  '../Story';\nimport Home from '../Home';\nimport CreateBook from '../CreateBook';\nimport './RouterOuter.scss';\n\nclass RouterOuter extends Component {\n\n  componentWillMount() {\n    document.title = 'WeWord';\n  }\n\n  render() {\n    return (\n      <div className=\"outer\">\n        <Router>\n          <Switch>\n            <Route path=\"/create\" component={CreateBook} />\n            <Route path=\"/stories/:storyId\" component={Story} />\n            <Route path=\"/\" component={Home} />\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default RouterOuter;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {LOGIN, LOGOUT} from \"../constants\";\n\nconst initialState = {\n    loggedIn: false,\n    name: '',\n}\n\nfunction rootReducer(state = initialState, action) {\n    const newState = {}\n    if(action.type === LOGIN) {\n        if(action.payload.length >= 16) {\n            throw new Error(\"Name is too long\");\n        }\n        state = {\n            loggedIn: true,\n            name: action.payload\n        }\n    }\n    else if(action.type === LOGOUT) {\n        state = initialState;\n    }\n    return state;\n}\n\nexport default rootReducer;","import { createStore } from \"redux\";\nimport rootReducer from \"../reducers/index\";\n\nconst store = createStore(rootReducer);\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport RouterOuter from './components/Router/index';\nimport * as serviceWorker from './serviceWorker';\n\nimport {Provider} from 'react-redux';\nimport store from './redux/store';\n\nimport ReactGA from 'react-ga';\nReactGA.initialize('UA-59921773-10');\nReactGA.pageview(window.location.pathname + window.location.search);\n\nReactDOM.render(\n    <Provider store={store}>\n        <RouterOuter />\n    </Provider>\n, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}